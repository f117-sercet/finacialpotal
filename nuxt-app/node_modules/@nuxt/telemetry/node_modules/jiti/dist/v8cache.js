/*! For license information please see v8cache.js.LICENSE.txt */
module.exports=(()=>{var e={"./node_modules/v8-compile-cache/v8-compile-cache.js":(e,t,s)=>{"use strict";e=s.nmd(e);const o=s("module"),r=s("crypto"),i=s("fs"),c=s("path"),n=s("vm"),a=s("os"),l=Object.prototype.hasOwnProperty;class h{constructor(e,t){const s=t?_(t+"."):"";this._blobFilename=c.join(e,s+"BLOB"),this._mapFilename=c.join(e,s+"MAP"),this._lockFilename=c.join(e,s+"LOCK"),this._directory=e,this._load()}has(e,t){return l.call(this._memoryBlobs,e)?this._invalidationKeys[e]===t:!!l.call(this._storedMap,e)&&this._storedMap[e][0]===t}get(e,t){if(l.call(this._memoryBlobs,e)){if(this._invalidationKeys[e]===t)return this._memoryBlobs[e]}else if(l.call(this._storedMap,e)){const s=this._storedMap[e];if(s[0]===t)return this._storedBlob.slice(s[1],s[2])}}set(e,t,s){this._invalidationKeys[e]=t,this._memoryBlobs[e]=s,this._dirty=!0}delete(e){l.call(this._memoryBlobs,e)&&(this._dirty=!0,delete this._memoryBlobs[e]),l.call(this._invalidationKeys,e)&&(this._dirty=!0,delete this._invalidationKeys[e]),l.call(this._storedMap,e)&&(this._dirty=!0,delete this._storedMap[e])}isDirty(){return this._dirty}save(){const e=this._getDump(),t=Buffer.concat(e[0]),s=JSON.stringify(e[1]);try{d(this._directory),i.writeFileSync(this._lockFilename,"LOCK",{flag:"wx"})}catch(e){return!1}try{i.writeFileSync(this._blobFilename,t),i.writeFileSync(this._mapFilename,s)}finally{i.unlinkSync(this._lockFilename)}return!0}_load(){try{this._storedBlob=i.readFileSync(this._blobFilename),this._storedMap=JSON.parse(i.readFileSync(this._mapFilename))}catch(e){this._storedBlob=Buffer.alloc(0),this._storedMap={}}this._dirty=!1,this._memoryBlobs={},this._invalidationKeys={}}_getDump(){const e=[],t={};let s=0;function o(o,r,i){e.push(i),t[o]=[r,s,s+i.length],s+=i.length}for(const e of Object.keys(this._memoryBlobs)){const t=this._memoryBlobs[e];o(e,this._invalidationKeys[e],t)}for(const e of Object.keys(this._storedMap)){if(l.call(t,e))continue;const s=this._storedMap[e],r=this._storedBlob.slice(s[1],s[2]);o(e,s[0],r)}return[e,t]}}class p{constructor(){this._cacheStore=null,this._previousModuleCompile=null}setCacheStore(e){this._cacheStore=e}install(){const e=this,t="function"==typeof s("./node_modules/v8-compile-cache sync recursive").resolve.paths;this._previousModuleCompile=o.prototype._compile,o.prototype._compile=function(s,r){const i=this;function n(e){return i.require(e)}function a(e,t){return o._resolveFilename(e,i,!1,t)}n.resolve=a,t&&(a.paths=function(e){return o._resolveLookupPaths(e,i,!0)}),n.main=process.mainModule,n.extensions=o._extensions,n.cache=o._cache;const l=c.dirname(r),h=e._moduleCompile(r,s),p=[i.exports,n,i,r,l,process,global,Buffer];return h.apply(i.exports,p)}}uninstall(){o.prototype._compile=this._previousModuleCompile}_moduleCompile(e,t){var s=t.length;if(s>=2&&35===t.charCodeAt(0)&&33===t.charCodeAt(1))if(2===s)t="";else{for(var i=2;i<s;++i){var c=t.charCodeAt(i);if(10===c||13===c)break}t=i===s?"":t.slice(i)}var a=o.wrap(t),l=r.createHash("sha1").update(t,"utf8").digest("hex"),h=this._cacheStore.get(e,l),p=new n.Script(a,{filename:e,lineOffset:0,displayErrors:!0,cachedData:h,produceCachedData:!0});return p.cachedDataProduced?this._cacheStore.set(e,l,p.cachedData):p.cachedDataRejected&&this._cacheStore.delete(e),p.runInThisContext({filename:e,lineOffset:0,columnOffset:0,displayErrors:!0})}}function d(e){u(c.resolve(e),511)}function u(e,t){try{i.mkdirSync(e,t)}catch(t){if("ENOENT"===t.code)u(c.dirname(e)),u(e);else try{if(!i.statSync(e).isDirectory())throw t}catch(e){throw t}}}function _(e){const t={"\\":"zB",":":"zC","/":"zS","\0":"z0",z:"zZ"};return e.replace(/[\\:/\x00z]/g,(e=>t[e]))}function m(){return!0===new n.Script('""',{produceCachedData:!0}).cachedDataProduced}function y(){const e=process.env.V8_COMPILE_CACHE_CACHE_DIR;if(e)return e;const t="function"==typeof process.getuid?"v8-compile-cache-"+process.getuid():"v8-compile-cache",s="string"==typeof process.versions.v8?process.versions.v8:"string"==typeof process.versions.chakracore?"chakracore-"+process.versions.chakracore:"node-"+process.version;return c.join(a.tmpdir(),t,s)}function f(){return e.parent&&"string"==typeof e.parent.filename?e.parent.filename:process.cwd()}if(!process.env.DISABLE_V8_COMPILE_CACHE&&m()){const e=new h(y(),f()),t=new p;t.setCacheStore(e),t.install(),process.once("exit",(()=>{e.isDirty()&&e.save(),t.uninstall()}))}e.exports.__TEST__={FileSystemBlobStore:h,NativeCompileCache:p,mkdirpSync:d,slashEscape:_,supportsCachedData:m,getCacheDir:y,getParentName:f}},"./node_modules/v8-compile-cache sync recursive":e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="./node_modules/v8-compile-cache sync recursive",e.exports=t},crypto:e=>{"use strict";e.exports=require("crypto")},fs:e=>{"use strict";e.exports=require("fs")},module:e=>{"use strict";e.exports=require("module")},os:e=>{"use strict";e.exports=require("os")},path:e=>{"use strict";e.exports=require("path")},vm:e=>{"use strict";e.exports=require("vm")}},t={};function s(o){if(t[o])return t[o].exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o](r,r.exports,s),r.loaded=!0,r.exports}return s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s("./node_modules/v8-compile-cache/v8-compile-cache.js")})().default;